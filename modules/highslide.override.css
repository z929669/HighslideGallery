/*
 * HighslideGallery adds simple highslide-style image/galleries and YouTube popups to MediaWiki pages.
 * @Copyright (C) 2012  Brian McCloskey, David Van Winkle, Step Modifications, Inc.
 *
 * This program is free software; you can redistribute it and/or modify it under the terms of the
 * GNU General Public License as published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program; if not, see
 * < https://www.gnu.org/licenses/ >.
 */

/*
 * HighslideGallery CSS overrides for Highslide 5.x
 * Vendor styles: modules/highslide.css
 */

/* -------------------------------------------------------------------------
 * Variables
 * ------------------------------------------------------------------------- */
:root {
	--hsg-caption-number: #777;
	--hsg-caption-text: #c0c0c0;
	--hsg-frame-bg: #000;
	--hsg-frame-border: #888;
	--hsg-frame-shadow: rgba(0, 0, 0, 0.9);
	--hsg-ts-border: #ff9012;
	--hsg-ts-border-hover: #aaa;
	--hsg-ytb-bg: #000;
}

/* -------------------------------------------------------------------------
 * Frame & caption tone
 * ------------------------------------------------------------------------- */

/* Base frame used by HSG (images & YouTube) */
.highslide-wrapper.hsg-frame {
	background: var(--hsg-frame-bg);
	border: none;
	box-shadow: 0 0 18px 0px var(--hsg-frame-shadow);

	/* Force horizontal centering in the viewport */
	left: 50% !important;
	transform: translateX(-50%);
}

/* Number + caption tone */
.highslide-number  {
	color: var(--hsg-caption-number);
}

.highslide-caption, .highslide-caption > .internal {
	color: var(--hsg-caption-text);
}

/* -------------------------------------------------------------------------
 * Controls & dimmer
 * ------------------------------------------------------------------------- */

/* Hide Full Expand button */
a.highslide-full-expand {
	display: block;
	width: 28px;
	height: 28px;
	background: url(graphics/fullexpand.gif) no-repeat 50% 50%;
	text-indent: -9999px;
	overflow: hidden;
}

/* Dimmer color */
.highslide-dimming {
	background-color: rgba(0, 0, 0, 0.75) !important;
}

/* Ensure the dimmer covers the viewport in Firefox */
@-moz-document url-prefix() {
	.highslide-dimming.highslide-viewport-size {
		position: fixed !important;
		left: 0 !important;
		top: 0 !important;
		width: 100% !important;
		height: 100% !important;
	}
}

/* Image edge glow + neutral cursor */
.highslide-image {
	box-shadow: 0 0 26px 12px var(--hsg-ytb-bg);
	cursor: default !important;
	border: none;
}

/* Ensure the close control is visible and above the skin UI */
.controls.close {
	position: fixed;      /* detach from Highslide's inner flow */
	top: 20px;
	right: 20px;
	z-index: 99999;
	opacity: 0.75;
}

/* Close control hover opacity */
.close:not(:disabled):not(.disabled):hover, .close:not(:disabled):not(.disabled):focus {
	opacity: 0.95;
}

/* Close button – make it clearly visible in the top-right */
.controls.close a {
	display: block;
	width: 2.0rem;
	height: 2.0rem;
	background: url(graphics/close.png) no-repeat 50% 50%;
	background-size: 2.0rem;
	text-indent: -9999px;
	overflow: hidden;
}

/* Bottom text controls – make them bigger and pulled up a bit */
.highslide-controls {
	font-size: 1.4rem;
	padding: 3px 8px;
	background: rgba(0, 0, 0, 0.65);
	border-radius: 4px;
}

.highslide-controls a {
	padding: 0 6px;
	height: 25px;
}

/* Breathing room above the viewport edge */
.highslide-viewport .highslide-controls {
	margin-bottom: 1.5rem;
}

/* -------------------------------------------------------------------------
 * Thumbstrip tweaks
 * ------------------------------------------------------------------------- */

.highslide-thumbstrip td {
	padding-bottom: 22px;
}

.highslide-thumbstrip-horizontal img {
	/* Make thumbstrip thumbs uniform width; height follows aspect ratio */
	width: 120px !important;
	height: auto !important;
	max-height: 80px;
	border: none;
}

.highslide-viewport .highslide-thumbstrip-horizontal .highslide-marker {
	border: none;
}

.highslide-thumbstrip-horizontal .highslide-scroll-up,
.highslide-thumbstrip-horizontal .highslide-scroll-up div,
.highslide-thumbstrip-horizontal .highslide-scroll-down,
.highslide-thumbstrip-horizontal .highslide-scroll-down div {
	height: 82px;
}

/* Thumb opacity/hover state */
.highslide-thumbstrip img {
	opacity: 0.5;
	border: 1px solid var(--hsg-frame-border) !important;
}

.highslide-thumbstrip img:hover {
	opacity: 1;
	border: 1px solid var(--hsg-ts-border-hover) !important;
}

.highslide-thumbstrip .highslide-active-anchor img {
	opacity: 1;
	border: 1px solid var(--hsg-ts-border) !important;
}

.highslide img {
	border: none;
}

/* Normalized thumb (JS-applied class) to remove default floats/margins */
.hsg-thumb-normalized {
	float: none;
	margin: 0.5rem;
}

/* Gallery layout inside text-break containers (including list contexts) */
.gallery.text-break {
	display: inline-block;
	vertical-align: top;
	margin: 0.5rem;
	padding: 0;
}

.gallery.text-break .thumb {
	float: none;
	display: block;
	margin: 0;
	vertical-align: top;
}

/* Flex wrapper for list-based galleries (JS-applied) */
.hsg-list-gallery-wrap {
	display: flex;
	flex-wrap: wrap;
	align-items: flex-start;
}

/* -------------------------------------------------------------------------
 * YouTube link + popup tweaks
 * ------------------------------------------------------------------------- */

.gallerytext {
	font-size: 0.8rem;
	padding: 0.25rem
}

.hsg-inline {
	background:
		url("graphics/image-lite.svg") center left no-repeat,
		url("graphics/image-lite.svg") center right no-repeat;
	background-size: 1rem 1rem;
	padding: 0 1.1rem 0 1.1rem;
	margin: 0 0.1rem 0 0.1rem;
}

/* Decorate ONLY plain text YouTube links, not thumbs */
a.link-youtube:not(.hsg-ytb-thumb) {
	background:
		url("graphics/youtube.svg") center left no-repeat,
		url("graphics/youtube.svg") center right no-repeat;
	background-size: 1rem 1rem;
	padding: 0 1.1rem 0 1.1rem;
	margin: 0 0.1rem 0 0.1rem;
}

/* No ::after triangle at all */
a.link-youtube::after {
	content: none;
}

/* YouTube popup shell */
.you-tube .highslide-footer,
.you-tube .highslide-header,
.you-tube .highslide-move {
	display: none;
}

.you-tube .highslide-html,
.you-tube .highslide-html-content,
.you-tube .highslide-html-content table,
.you-tube .highslide-html-content td,
.you-tube .highslide-html-content tr {
	background: var(--hsg-ytb-bg) !important;
	border: 0 !important;
	padding: 0 !important;
	margin: 0 !important;
}
